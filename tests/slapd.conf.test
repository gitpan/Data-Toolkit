#!/bin/sh
#
# Script to generate slapd.conf
#
# $Id: slapd.conf.test 20 2006-11-30 17:18:40Z remotesvn $

cat << EOF
# slapd.conf for test purposes
#
# WARNING WARNING WARNING
# WARNING WARNING WARNING
#        This file is generated by the start-slapd script.
#        It will be overwritten next time the script is run.
# WARNING WARNING WARNING
# WARNING WARNING WARNING
#
#
# Andrew Findlay
# andrew.findlay@skills-1st.co.uk
#

# Logging - this goes to syslog as 'local4'
#
# 512+256 to enable stats logging
# loglevel	768
loglevel 768


# Schema definitions
#
include         ${SCHEMADIR}/core.schema
include         ${SCHEMADIR}/cosine.schema
include         ${SCHEMADIR}/inetorgperson.schema

# These should have absolute pathnames on production systems
pidfile		./openldap-db/slapd.pid
argsfile	./openldap-db/slapd.args

#######################################################################
# database definitions
#######################################################################

database	bdb
suffix		"dc=example,dc=org"
rootdn		"cn=root,dc=example,dc=org"

password-hash {SSHA}

# Cleartext passwords, especially for the rootdn, should
# be avoided.  See slappasswd(8) and slapd.conf(5) for details.
# Use of strong authentication encouraged.
#
# The following two lines describe the same password:
# rootpw		secret
# rootpw		{SSHA}fFCeSYwjK/wERk1h4ceqYohqrGT/8VxJ
#
rootpw		secret

# The database directory MUST exist prior to running slapd AND 
# should only be accessable by the slapd/tools. Mode 700 recommended.
# This should be an absolute pathname on production servers.
#
directory	./openldap-db

# Indices to maintain
index	default			pres,eq,sub
index	objectClass		pres,eq
index	cn
index	sn
index	mail
index	o
index	ou
index	displayName
index	uid			pres,eq
index	associatedDomain	pres,eq
index	member			pres,eq

########################################################################
# ACLs for this database
########################################################################

########################################################################
# First make sure the root DSE and the schema data can be read
########################################################################
#
access to dn.exact=""
        by * read
#
access to dn.exact="cn=subschema"
        by * read

# Policy for general entries
access to attrs=userPassword
        by self =w
        by * auth

access to *
        by * read


#
EOF
#
